# Show Your Work: Scratchpads for Intermediate Computation with Language Models

**주요 주장**  
이 논문은 대형 언어 모델이 복잡한 다단계 계산을 수행할 때, 중간 계산 과정을 텍스트 버퍼(“스크래치패드”)에 기록하도록 학습시키면 성능이 극적으로 향상된다는 핵심 주장을 제시한다.[1]

## 1. 해결하고자 하는 문제  
기존 대형 Transformer 언어 모델은 단일 통과(one-pass)로 처리 가능한 생성 작업에는 뛰어나지만, 언어 모델에 내장된 계산 능력만으로는 자리 올림이 필요한 장기 덧셈(long addition)이나 프로그램 실행(execution) 같은 비한정적(multistep) 계산 작업을 정확히 수행하지 못한다.[1]

## 2. 제안하는 방법  
### 2.1 스크래치패드 개념  
- 모델이 최종 답 출력 전에 자유롭게 중간 계산 결과를 생성하도록 허용  
- 중간 상태를 토큰 시퀀스로 표현하여 Transformer의 입력 길이를 동적으로 늘림  

### 2.2 수식적 표현  
장기 덧셈 예시 입력  
```
2 9 + 5 7
```
스크래치패드 타깃  
```
<scratch>
2 9 + 5 7, C:0
2+5,6 C:1
,8 6 C:0
</scratch>
8 6
```

### 2.3 모델 구조 및 학습  
- 사전학습된 디코더 전용 Transformer(2M–137B 파라미터)  
- 파인튜닝 시 스크래치패드 단계와 최종 출력을 순차 예측하도록 학습  
- 실험별로 few-shot 및 fine-tuning 설정 모두 적용[1]

## 3. 성능 향상  
| 과제               | Baseline 정확도 | Scratchpad 정확도 |
|--------------------|-----------------|-------------------|
| 장기 덧셈(in-dist)    | 0%              | 100% (≥100M)      |
| 장기 덧셈(9~10자리) | 0%              | 60–90%            |
| 다항식 평가         | 8.8%            | 20.1% (few-shot)  |
|                      | 31.8%           | 50.7% (fine-tune) |

- **장기 덧셈**: 스크래치패드 없이 10억 이하 모델은 실패, 스크래치패드로 학습 시 1억 규모 모델부터 성공.[1]
- **다항식 평가**: few-shot 및 파인튜닝 모두에서 두 배 이상 성능 향상.  
- **Python 실행**: 합성 데이터 및 MBPP에 대해 직접 실행 대비 최대 2배 이상 정확도 개선.  

## 4. 일반화 성능 향상  
스크래치패드는 **훈련 분포 밖**의 입력(더 긴 숫자, 복잡한 프로그램)에 대한 일반화 능력을 크게 높인다.  
- 장기 덧셈에서 9·10자리 입력에도 일관된 성능 유지  
- 프로그램 실행 과제에서 코드 변형·데이터 증강 후에도 trace 정확도와 출력 정확도 동시 상승[1]

## 5. 한계  
- **문맥 창 길이 제한**: 최대 512토큰 내에서만 스크래치패드 제공 가능  
- **수작업 중간 상태 설계 필요**: 모든 과제에 맞는 스크래치패드 형식을 일일이 설계  
- **추가 메모리·시간 비용**: 중간 토큰 생성으로 인한 계산량 증가  

## 6. 향후 연구 영향 및 고려 사항  
- **Adaptive Computation Time** 연구에 새로운 방향 제시: 기존 아키텍처 변경 없이 연산량 동적 조절 가능  
- **반지도 학습**: 강화학습(RL)을 통해 스크래치패드 사용을 자동으로 학습하도록 확장  
- **확장성**: 문맥 창 확장 기술(long-context Transformer)과 결합 시 더욱 복잡한 알고리즘에도 적용 가능  
- **응용 분야**: 신택스 기반 프로그램 분석, 대화형 코드 어시스턴트, 복잡한 수치 시뮬레이션 등에 활용 기대.[1]

***

 attached_file:1[1]

[1](https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/22370781/b80510d4-28db-4f04-800c-4188486970ef/2112.00114v1.pdf)
